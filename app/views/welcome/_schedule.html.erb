<% if Current.user && Current.user.name == "ADMIN" %>
    <% val_1 = "5" %>
    <% val_2 = "7" %>
<% else %>
    <% val_1 = "10" %>
    <% val_2 = "2" %>
<% end %>

<div id="filterrific_results">
    <div class="bg-dark mt-4 p-3 border border-dark rounded w-900">
        <div class="row">
            <div class="col-<%= val_1 %> d-flex align-items-center">
                <div>Displaying <span id="count"></span> out of 
                <%= Schedule.where("seats_available != ? AND date > ?", 0, Date.today).count %> records</div>
            </div>
            <div class="col-<%= val_2 %> d-flex justify-content-end">
                <% if Current.user && Current.user.name == "ADMIN" %>
                <%= link_to 'Add Records', add_schedule_path, class: "btn btn-success", style: "margin-right: 10px;" %>
                <% end %>
                <%= link_to 'Reset Filters', reset_filterrific_url, class: "btn btn-primary" %>
            </div>
        </div>
        <%# not working
        <%= render_filterrific_spinner %>
    </div>
    <table class="table table-dark table-striped text-light mt-4" id="table">
        <tr>
            <th style="width: 15%; padding-left: 20px !important;">Departure</th>
            <th style="width: 15%;">Destination</th>
            <th style="width: 10%;">Date</th>
            <th style="width: 10%;">Time</th>
            <th style="width: 10%;" class="text-center">Available Seats</th>
            <th style="width: 10%;" class="text-center">Price (&#8369;)</th>
            <th style="width: 20%;"></th>
        </tr>
        <% schedule.each do |data| %>
            <% if data.seats_available != 0 && data.date.future? %>
            <tr>
                <td style="padding-left: 20px !important;"><%= data.departure %></td>
                <td><%= data.destination %></td>
                <td><%= data.formatted_date %></td>
                <td><%= data.formatted_time %></td>
                <td class="text-center"><%= data.seats_available %></td>
                <td class="text-center"><%= data.price %></td>
                <td style="padding-right: 20px !important;">
                    <% if Current.user && Current.user.name == "ADMIN" %>
                        <%= link_to 'View Passengers', schedule_bookings_path(book_id: data.id), class: "btn btn-primary float-end" %>
                    <% elsif Date.current.strftime('%Y-%m-%d') == data.formatted_date_for_comparison %>
                        <%# disable Book button for schedules having the same date as today %>
                    <% else %>
                        <%= link_to 'Book', booking_path(book_id: data.id), class: "btn btn-primary float-end" %>
                    <% end %>
                </td>
            </tr>
            <% end %>
        <% end %>
    </table>
</div>

<%= will_paginate schedule, previous_label: 'Previous', next_label: 'Next'  %>
